{"version":3,"file":"index.cjs","sources":["../src/components/list.tsx","../src/components/marks.tsx","../src/warnings.ts","../src/components/unknown.tsx","../src/components/defaults.tsx","../src/components/merge.ts","../src/react-portable-text.tsx"],"sourcesContent":["import type {PortableTextListComponent, PortableTextListItemComponent} from '../types'\n\nexport const defaultLists: Record<'number' | 'bullet', PortableTextListComponent> = {\n  number: ({children}) => <ol>{children}</ol>,\n  bullet: ({children}) => <ul>{children}</ul>,\n}\n\nexport const DefaultListItem: PortableTextListItemComponent = ({children}) => <li>{children}</li>\n","import type {TypedObject} from '@portabletext/types'\n\nimport type {PortableTextMarkComponent} from '../types'\n\ninterface DefaultLink extends TypedObject {\n  _type: 'link'\n  href: string\n}\n\nconst link: PortableTextMarkComponent<DefaultLink> = ({children, value}) => (\n  <a href={value?.href}>{children}</a>\n)\n\nconst underlineStyle = {textDecoration: 'underline'}\n\nexport const defaultMarks: Record<string, PortableTextMarkComponent | undefined> = {\n  'em': ({children}) => <em>{children}</em>,\n  'strong': ({children}) => <strong>{children}</strong>,\n  'code': ({children}) => <code>{children}</code>,\n  'underline': ({children}) => <span style={underlineStyle}>{children}</span>,\n  'strike-through': ({children}) => <del>{children}</del>,\n  link,\n}\n","const getTemplate = (type: string, prop: string): string =>\n  `[@portabletext/react] Unknown ${type}, specify a component for it in the \\`components.${prop}\\` prop`\n\nexport const unknownTypeWarning = (typeName: string): string =>\n  getTemplate(`block type \"${typeName}\"`, 'types')\n\nexport const unknownMarkWarning = (markType: string): string =>\n  getTemplate(`mark type \"${markType}\"`, 'marks')\n\nexport const unknownBlockStyleWarning = (blockStyle: string): string =>\n  getTemplate(`block style \"${blockStyle}\"`, 'block')\n\nexport const unknownListStyleWarning = (listStyle: string): string =>\n  getTemplate(`list style \"${listStyle}\"`, 'list')\n\nexport const unknownListItemStyleWarning = (listStyle: string): string =>\n  getTemplate(`list item style \"${listStyle}\"`, 'listItem')\n\nexport function printWarning(message: string): void {\n  console.warn(message)\n}\n","import type {PortableTextReactComponents} from '../types'\nimport {unknownTypeWarning} from '../warnings'\n\nconst hidden = {display: 'none'}\n\nexport const DefaultUnknownType: PortableTextReactComponents['unknownType'] = ({\n  value,\n  isInline,\n}) => {\n  const warning = unknownTypeWarning(value._type)\n  return isInline ? <span style={hidden}>{warning}</span> : <div style={hidden}>{warning}</div>\n}\n\nexport const DefaultUnknownMark: PortableTextReactComponents['unknownMark'] = ({\n  markType,\n  children,\n}) => {\n  return <span className={`unknown__pt__mark__${markType}`}>{children}</span>\n}\n\nexport const DefaultUnknownBlockStyle: PortableTextReactComponents['unknownBlockStyle'] = ({\n  children,\n}) => {\n  return <p>{children}</p>\n}\n\nexport const DefaultUnknownList: PortableTextReactComponents['unknownList'] = ({children}) => {\n  return <ul>{children}</ul>\n}\n\nexport const DefaultUnknownListItem: PortableTextReactComponents['unknownListItem'] = ({\n  children,\n}) => {\n  return <li>{children}</li>\n}\n","import type {PortableTextBlockStyle} from '@portabletext/types'\nimport type {JSX} from 'react'\n\nimport type {PortableTextBlockComponent, PortableTextReactComponents} from '../types'\nimport {DefaultListItem, defaultLists} from './list'\nimport {defaultMarks} from './marks'\nimport {\n  DefaultUnknownBlockStyle,\n  DefaultUnknownList,\n  DefaultUnknownListItem,\n  DefaultUnknownMark,\n  DefaultUnknownType,\n} from './unknown'\n\nexport const DefaultHardBreak = (): JSX.Element => <br />\n\nexport const defaultBlockStyles: Record<\n  PortableTextBlockStyle,\n  PortableTextBlockComponent | undefined\n> = {\n  normal: ({children}) => <p>{children}</p>,\n  blockquote: ({children}) => <blockquote>{children}</blockquote>,\n  h1: ({children}) => <h1>{children}</h1>,\n  h2: ({children}) => <h2>{children}</h2>,\n  h3: ({children}) => <h3>{children}</h3>,\n  h4: ({children}) => <h4>{children}</h4>,\n  h5: ({children}) => <h5>{children}</h5>,\n  h6: ({children}) => <h6>{children}</h6>,\n}\n\nexport const defaultComponents: PortableTextReactComponents = {\n  types: {},\n\n  block: defaultBlockStyles,\n  marks: defaultMarks,\n  list: defaultLists,\n  listItem: DefaultListItem,\n  hardBreak: DefaultHardBreak,\n\n  unknownType: DefaultUnknownType,\n  unknownMark: DefaultUnknownMark,\n  unknownList: DefaultUnknownList,\n  unknownListItem: DefaultUnknownListItem,\n  unknownBlockStyle: DefaultUnknownBlockStyle,\n}\n","import type {PortableTextComponents, PortableTextReactComponents} from '../types'\n\nexport function mergeComponents(\n  parent: PortableTextReactComponents,\n  overrides: PortableTextComponents,\n): PortableTextReactComponents {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const {block, list, listItem, marks, types, ...rest} = overrides\n  // @todo figure out how to not `as ...` these\n  return {\n    ...parent,\n    block: mergeDeeply(parent, overrides, 'block') as PortableTextReactComponents['block'],\n    list: mergeDeeply(parent, overrides, 'list') as PortableTextReactComponents['list'],\n    listItem: mergeDeeply(parent, overrides, 'listItem') as PortableTextReactComponents['listItem'],\n    marks: mergeDeeply(parent, overrides, 'marks') as PortableTextReactComponents['marks'],\n    types: mergeDeeply(parent, overrides, 'types') as PortableTextReactComponents['types'],\n    ...rest,\n  }\n}\n\nfunction mergeDeeply(\n  parent: PortableTextReactComponents,\n  overrides: PortableTextComponents,\n  key: 'block' | 'list' | 'listItem' | 'marks' | 'types',\n): PortableTextReactComponents[typeof key] {\n  const override = overrides[key]\n  const parentVal = parent[key]\n\n  if (typeof override === 'function') {\n    return override\n  }\n\n  if (override && typeof parentVal === 'function') {\n    return override\n  }\n\n  if (override) {\n    return {...parentVal, ...override} as PortableTextReactComponents[typeof key]\n  }\n\n  return parentVal\n}\n","import type {ToolkitNestedPortableTextSpan, ToolkitTextNode} from '@portabletext/toolkit'\nimport {\n  buildMarksTree,\n  isPortableTextBlock,\n  isPortableTextListItemBlock,\n  isPortableTextToolkitList,\n  isPortableTextToolkitSpan,\n  isPortableTextToolkitTextNode,\n  LIST_NEST_MODE_HTML,\n  nestLists,\n  spanToPlainText,\n} from '@portabletext/toolkit'\nimport type {\n  PortableTextBlock,\n  PortableTextListItemBlock,\n  PortableTextMarkDefinition,\n  PortableTextSpan,\n  TypedObject,\n} from '@portabletext/types'\nimport {type JSX, type ReactNode, useMemo} from 'react'\n\nimport {defaultComponents} from './components/defaults'\nimport {mergeComponents} from './components/merge'\nimport type {\n  MissingComponentHandler,\n  NodeRenderer,\n  PortableTextProps,\n  PortableTextReactComponents,\n  ReactPortableTextList,\n  Serializable,\n  SerializedBlock,\n} from './types'\nimport {\n  printWarning,\n  unknownBlockStyleWarning,\n  unknownListItemStyleWarning,\n  unknownListStyleWarning,\n  unknownMarkWarning,\n  unknownTypeWarning,\n} from './warnings'\n\nexport function PortableText<B extends TypedObject = PortableTextBlock>({\n  value: input,\n  components: componentOverrides,\n  listNestingMode,\n  onMissingComponent: missingComponentHandler = printWarning,\n}: PortableTextProps<B>): JSX.Element {\n  const handleMissingComponent = missingComponentHandler || noop\n  const blocks = Array.isArray(input) ? input : [input]\n  const nested = nestLists(blocks, listNestingMode || LIST_NEST_MODE_HTML)\n\n  const components = useMemo(() => {\n    return componentOverrides\n      ? mergeComponents(defaultComponents, componentOverrides)\n      : defaultComponents\n  }, [componentOverrides])\n\n  const renderNode = useMemo(\n    () => getNodeRenderer(components, handleMissingComponent),\n    [components, handleMissingComponent],\n  )\n  const rendered = nested.map((node, index) =>\n    renderNode({node: node, index, isInline: false, renderNode}),\n  )\n\n  return <>{rendered}</>\n}\n\nconst getNodeRenderer = (\n  components: PortableTextReactComponents,\n  handleMissingComponent: MissingComponentHandler,\n): NodeRenderer => {\n  function renderNode<N extends TypedObject>(options: Serializable<N>): ReactNode {\n    const {node, index, isInline} = options\n    const key = node._key || `node-${index}`\n\n    if (isPortableTextToolkitList(node)) {\n      return renderList(node, index, key)\n    }\n\n    if (isPortableTextListItemBlock(node)) {\n      return renderListItem(node, index, key)\n    }\n\n    if (isPortableTextToolkitSpan(node)) {\n      return renderSpan(node, index, key)\n    }\n\n    if (hasCustomComponentForNode(node)) {\n      return renderCustomBlock(node, index, key, isInline)\n    }\n\n    if (isPortableTextBlock(node)) {\n      return renderBlock(node, index, key, isInline)\n    }\n\n    if (isPortableTextToolkitTextNode(node)) {\n      return renderText(node, key)\n    }\n\n    return renderUnknownType(node, index, key, isInline)\n  }\n\n  function hasCustomComponentForNode(node: TypedObject): boolean {\n    return node._type in components.types\n  }\n\n  /* eslint-disable react/jsx-no-bind */\n  function renderListItem(\n    node: PortableTextListItemBlock<PortableTextMarkDefinition, PortableTextSpan>,\n    index: number,\n    key: string,\n  ) {\n    const tree = serializeBlock({node, index, isInline: false, renderNode})\n    const renderer = components.listItem\n    const handler = typeof renderer === 'function' ? renderer : renderer[node.listItem]\n    const Li = handler || components.unknownListItem\n\n    if (Li === components.unknownListItem) {\n      const style = node.listItem || 'bullet'\n      handleMissingComponent(unknownListItemStyleWarning(style), {\n        type: style,\n        nodeType: 'listItemStyle',\n      })\n    }\n\n    let children = tree.children\n    if (node.style && node.style !== 'normal') {\n      // Wrap any other style in whatever the block serializer says to use\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const {listItem, ...blockNode} = node\n      children = renderNode({node: blockNode, index, isInline: false, renderNode})\n    }\n\n    return (\n      <Li key={key} value={node} index={index} isInline={false} renderNode={renderNode}>\n        {children}\n      </Li>\n    )\n  }\n\n  function renderList(node: ReactPortableTextList, index: number, key: string) {\n    const children = node.children.map((child, childIndex) =>\n      renderNode({\n        node: child._key ? child : {...child, _key: `li-${index}-${childIndex}`},\n        index: childIndex,\n        isInline: false,\n        renderNode,\n      }),\n    )\n\n    const component = components.list\n    const handler = typeof component === 'function' ? component : component[node.listItem]\n    const List = handler || components.unknownList\n\n    if (List === components.unknownList) {\n      const style = node.listItem || 'bullet'\n      handleMissingComponent(unknownListStyleWarning(style), {nodeType: 'listStyle', type: style})\n    }\n\n    return (\n      <List key={key} value={node} index={index} isInline={false} renderNode={renderNode}>\n        {children}\n      </List>\n    )\n  }\n\n  function renderSpan(node: ToolkitNestedPortableTextSpan, _index: number, key: string) {\n    const {markDef, markType, markKey} = node\n    const Span = components.marks[markType] || components.unknownMark\n    const children = node.children.map((child, childIndex) =>\n      renderNode({node: child, index: childIndex, isInline: true, renderNode}),\n    )\n\n    if (Span === components.unknownMark) {\n      handleMissingComponent(unknownMarkWarning(markType), {nodeType: 'mark', type: markType})\n    }\n\n    return (\n      <Span\n        key={key}\n        text={spanToPlainText(node)}\n        value={markDef}\n        markType={markType}\n        markKey={markKey}\n        renderNode={renderNode}\n      >\n        {children}\n      </Span>\n    )\n  }\n\n  function renderBlock(node: PortableTextBlock, index: number, key: string, isInline: boolean) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const {_key, ...props} = serializeBlock({node, index, isInline, renderNode})\n    const style = props.node.style || 'normal'\n    const handler =\n      typeof components.block === 'function' ? components.block : components.block[style]\n    const Block = handler || components.unknownBlockStyle\n\n    if (Block === components.unknownBlockStyle) {\n      handleMissingComponent(unknownBlockStyleWarning(style), {\n        nodeType: 'blockStyle',\n        type: style,\n      })\n    }\n\n    return <Block key={key} {...props} value={props.node} renderNode={renderNode} />\n  }\n\n  function renderText(node: ToolkitTextNode, key: string) {\n    if (node.text === '\\n') {\n      const HardBreak = components.hardBreak\n      return HardBreak ? <HardBreak key={key} /> : '\\n'\n    }\n\n    return node.text\n  }\n\n  function renderUnknownType(node: TypedObject, index: number, key: string, isInline: boolean) {\n    const nodeOptions = {\n      value: node,\n      isInline,\n      index,\n      renderNode,\n    }\n\n    handleMissingComponent(unknownTypeWarning(node._type), {nodeType: 'block', type: node._type})\n\n    const UnknownType = components.unknownType\n    return <UnknownType key={key} {...nodeOptions} />\n  }\n\n  function renderCustomBlock(node: TypedObject, index: number, key: string, isInline: boolean) {\n    const nodeOptions = {\n      value: node,\n      isInline,\n      index,\n      renderNode,\n    }\n\n    const Node = components.types[node._type]\n    return Node ? <Node key={key} {...nodeOptions} /> : null\n  }\n  /* eslint-enable react/jsx-no-bind */\n\n  return renderNode\n}\n\nfunction serializeBlock(options: Serializable<PortableTextBlock>): SerializedBlock {\n  const {node, index, isInline, renderNode} = options\n  const tree = buildMarksTree(node)\n  const children = tree.map((child, i) =>\n    renderNode({node: child, isInline: true, index: i, renderNode}),\n  )\n\n  return {\n    _key: node._key || `block-${index}`,\n    children,\n    index,\n    isInline,\n    node,\n  }\n}\n\nfunction noop() {\n  // Intentional noop\n}\n"],"names":["defaultLists","number","children","jsx","bullet","DefaultListItem","link","value","href","underlineStyle","textDecoration","defaultMarks","em","strong","code","underline","style","strike-through","getTemplate","type","prop","unknownTypeWarning","typeName","unknownMarkWarning","markType","unknownBlockStyleWarning","blockStyle","unknownListStyleWarning","listStyle","unknownListItemStyleWarning","printWarning","message","console","warn","hidden","display","DefaultUnknownType","isInline","warning","_type","DefaultUnknownMark","className","DefaultUnknownBlockStyle","DefaultUnknownList","DefaultUnknownListItem","DefaultHardBreak","defaultBlockStyles","normal","blockquote","h1","h2","h3","h4","h5","h6","defaultComponents","types","block","marks","list","listItem","hardBreak","unknownType","unknownMark","unknownList","unknownListItem","unknownBlockStyle","mergeComponents","parent","overrides","rest","_excluded","_objectSpread","mergeDeeply","key","override","parentVal","PortableText","input","components","componentOverrides","listNestingMode","onMissingComponent","missingComponentHandler","handleMissingComponent","noop","blocks","Array","isArray","nested","nestLists","LIST_NEST_MODE_HTML","useMemo","renderNode","getNodeRenderer","rendered","map","node","index","options","_key","isPortableTextToolkitList","renderList","isPortableTextListItemBlock","renderListItem","isPortableTextToolkitSpan","renderSpan","hasCustomComponentForNode","renderCustomBlock","isPortableTextBlock","renderBlock","isPortableTextToolkitTextNode","renderText","renderUnknownType","tree","serializeBlock","renderer","Li","nodeType","blockNode","_objectWithoutProperties","_excluded2","child","childIndex","component","List","_index","markDef","markKey","Span","text","spanToPlainText","_serializeBlock","props","_excluded3","Block","HardBreak","nodeOptions","UnknownType","Node","buildMarksTree","i"],"mappings":"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"}