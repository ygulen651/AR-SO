{"version":3,"file":"BroadcastDisplayedDocument.js","sources":["../../src/presentation/loader/BroadcastDisplayedDocument.tsx"],"sourcesContent":["import {memo, useEffect} from 'react'\nimport {type SanityDocument} from 'sanity'\n\nimport {usePresentationParams} from '../usePresentationParams'\nimport {useDisplayedDocumentBroadcaster} from './DisplayedDocumentBroadcaster'\n\n/**\n * Sanity Form input component that reads the current form state and broadcasts it to\n * the live query store\n */\nfunction BroadcastDisplayedDocument(props: {\n  value: Partial<SanityDocument> | null | undefined\n}): React.JSX.Element | null {\n  const setDisplayedDocument = useDisplayedDocumentBroadcaster()\n  const params = usePresentationParams(false)\n\n  useEffect(() => {\n    const timeout = setTimeout(() => setDisplayedDocument?.(props.value), 10)\n    return () => clearTimeout(timeout)\n  }, [params?.perspective, props.value, setDisplayedDocument])\n\n  return null\n}\n\nexport default memo(BroadcastDisplayedDocument)\n"],"names":["BroadcastDisplayedDocument","props","$","_c","setDisplayedDocument","useDisplayedDocumentBroadcaster","params","usePresentationParams","t0","value","timeout","setTimeout","clearTimeout","t1","perspective","t2","useEffect","memo"],"mappings":";;AAUA,SAAAA,2BAAAC,OAAA;AAAAC,QAAAA,IAAAC,uBAAA,CAAA,GAGEC,uBAA6BC,6BAAAA,mCAC7BC,SAAeC,aAAAA,sBAAA,EAA2B;AAACC,MAAAA;AAAAN,WAAAD,MAAAQ,SAAAP,SAAAE,wBAEjCI,KAAAA,MAAA;AACR,UAAAE,UAAgBC,WAAiBP,MAAAA,uBAAuBH,MAAKQ,KAAA,GAAA,EAAW;AAC3DG,WAAAA,MAAAA,aAAaF,OAAO;AAAA,EAAA,GAClCR,EAAA,CAAA,IAAAD,MAAAQ,OAAAP,OAAAE,sBAAAF,OAAAM,MAAAA,KAAAN,EAAA,CAAA;AAAG,QAAAW,KAAAP,QAAMQ;AAAaC,MAAAA;AAAAb,SAAAA,EAAA,CAAA,MAAAD,MAAAQ,SAAAP,EAAA,CAAA,MAAAE,wBAAAF,EAAA,CAAA,MAAAW,MAApBE,MAACF,IAAqBZ,MAAKQ,OAAQL,oBAAoB,GAACF,EAAA,CAAA,IAAAD,MAAAQ,OAAAP,OAAAE,sBAAAF,OAAAW,IAAAX,OAAAa,MAAAA,KAAAb,EAAA,CAAA,GAH3Dc,gBAAUR,IAGPO,EAAwD,GAAC;AAAA;AAK9D,IAAeE,+BAAAA,MAAAA,KAAKjB,0BAA0B;;"}